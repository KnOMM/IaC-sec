machine1: 35722
machine2: 42222
machine3: 33922

startup_name: be.bop

dnsips:
  - 1.1.1.1
  - 8.8.8.8
  - 9.9.9.9

alips:
  - 192.168.42.0/23
  - 127.0.0.0/8
  - 172.17.0.0/16

prometheus_jobs:
  - name: linux
    target_port: 9100
    target_group: 
      - KnOMM-1
      - KnOMM-2
      - KnOMM-3


  - name: bind9
    target_port: 9119
    target_group: 
      - ns-1
      - ns-2
      - KnOMM-3

  - name: nginx
    target_port: 9113
    target_group: 
      - www-1
      - www-2
      - KnOMM-3
      
  - name: mysql
    target_port: 9104
    target_group:
      - mysql-1
      - mysql-2

  - name: influxdb
    target_port: 9424
    target_group:
      - influxdb

  - name: haproxy
    target_port: 9101
    target_group: 
      - lb-1
      - lb-2

  - name: keepalived
    target_port: 9165
    target_group: 
      - KnOMM-1
      - KnOMM-2

mysql_backup: backup
backup_server_ip: 192.168.42.132
backup_server_ssh_key: ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIEu6pFFWyuRrl4WGFPQGElYN9txwTGm2wSntcpVAaN90

mysql_replication_user: replication
agama_port: 8001
grafana_port: 3001

agama_amount: 2

influx_host: KnOMM-1 
mysql_host: KnOMM-1
keepalived_master: KnOMM-1

mysql_backup_host: "{{ groups['db_servers'] | reject('eq', mysql_host) | first | default(mysql_host) }}"

mysql_database: agama
mysql_user: agama
mysql_exporter_user: exporter
mysql_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          31343062633965356339626332633165393535323039613336323661663338613031383333643234
          6162663636323038396134393963623365333062346562350a373234303034393066653962656236
          36346566656130316332363064656539396366383939643937383561653634626266313139383938
          6438356630636366390a636236656331393130376466353736626638333966633634626438393632
          6161

grafana_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          38323264366630626539376463313032326163636432363961333766323462343134356262616565
          3731643732333063313133323962656632323565396530650a303465646661656131323361663966
          62623236356163363565633265356435353865636234666165326234326539323332386636333233
          3235333639643030350a313761623631316435653062396435336233303861323565323336303365
          62303065323062396136626231643732373366313436343637326266343633643833

mysql_replication_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          35383337316133396132666630313833396534333262613461646639666438643532336464303066
          6165326634383835343036643061333830613264376139370a616166326131636634616438653835
          32383736383332383062643230376464366130633832333063386261666631663339356132653334
          6233343637636566340a336162363466353638333439663836366231633139373161366234393335
          30386361396338636136313031366563623561613863313531316434383965376535

keepalived_pass: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          36376336353962646237326463646237326439346138366635633537376437343266333833653835
          6438396466386130613937636138623631666534646433330a623239393331643165396266303134
          39646537653430623734313736353566663264353563643565646130376437363137373632313539
          3135633437643239340a323737616131663461373237643230636539333933313935616566383261
          3238


dns_transfer_key: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          35626539623037343062353738346161343339613464396433336635646637353562653966366564
          3434346461623237663230656235313332646665353161350a663136613337643330333036333061
          36383839316534663931633166653032643035633263633465393935313164656137646161663534
          3864653134383538630a656430363638383462363738383635636631393537666564336634653439
          66366665656465616134376233383931346563356439326435626333393133616338363035646335
          6164353265623063363338386566663538653035363364636665

dns_update_key: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          64376166396536613630393135363636633361376639626537386634663831323462343863636164
          3733326232633963343666333061363835646336396539380a303963376536663930313266376565
          66663264643137396438373865306535343063316337633265303333666337376430626537623366
          3636356263626634630a393130386339633535353365306435333164326366396331346534656364
          38303738386330623330313662323534396232643566366533326434623534323931366132663232
          3061636434356538316135343538373032386435336339333435


node_id: "{{ (ansible_port / 100) | int }}"
# node_id: "{{ inventory_hostname.split('-'[-1]) | int}}"


dns_cnames:
  - cname: grafana
    value: "{{ groups['grafana'][0] }}"
  - cname: influxdb
    value: "{{ groups['influxdb'][0] }}"
  - cname: lb-1
    value: "{{ groups['haproxy'][0] }}" 
  - cname: lb-2
    value: "{{ groups['haproxy'][1] }}" 
  - cname: mysql-1
    value: "{{ groups['db_servers'][0] }}" 
  - cname: mysql-2
    value: "{{ groups['db_servers'][1] }}"
  - cname: ns-1
    value: "{{ groups['dns_secondary'][0] }}"
    # value: "{{ groups['dns_servers'][0] }}"
  - cname: ns-2
    value: "{{ groups['dns_secondary'][1] }}"
    # value: "{{ groups['dns_servers'][0] }}"
  - cname: prometheus
    value: "{{ groups['metrics'][0] }}"
  - cname: www-1
    value: "{{ groups['web_servers'][0] }}"
  - cname: www-2
    value: "{{ groups['web_servers'][1] }}"
  - cname: test6
    value: 127.0.0.1
