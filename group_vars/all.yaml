machine1: 45422
machine2: 30322

startup_name: be.bop

dnsips:
  - 1.1.1.1
  - 8.8.8.8
  - 9.9.9.9

alips:
  - 192.168.42.0/23
  - 127.0.0.0/8
  - 172.17.0.0/16

prometheus_jobs:
  - name: linux
    target_port: 9100
    target_group: all

  - name: bind9
    target_port: 9119
    target_group: dns_servers

  - name: nginx
    target_port: 9113
    target_group: web_servers
  
  - name: mysql
    target_port: 9104
    target_group: db_servers

  - name: influxdb
    target_port: 9424
    target_group: influxdb

  - name: haproxy
    target_port: 9101
    target_group: haproxy

  - name: keepalived
    target_port: 9165
    target_group: keepalived

mysql_backup: backup
backup_server_ip: 192.168.42.132
backup_server_ssh_key: ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIEu6pFFWyuRrl4WGFPQGElYN9txwTGm2wSntcpVAaN90

mysql_replication_user: replication
agama_port: 8001
grafana_port: 3001

agama_amount: 2

influx_host: KnOMM-1 
mysql_host: KnOMM-2
keepalived_master: KnOMM-1

mysql_backup_host: "{{ groups['db_servers'] | reject('eq', mysql_host) | first | default(mysql_host) }}"

mysql_database: agama
mysql_user: agama
mysql_exporter_user: exporter
mysql_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          36376339313830376530626435666361623362353335326330333831393736373933616364383863
          6535353837376333303234663038653535626261346162340a636537376339626135636261613662
          39663830303034633339303931373131646531343139363938666465653463303037356538633863
          6662393233303566320a663566646635663537633934376164336333333637353364366132656434
          3364

grafana_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          63323336646533663164363863613738343432646537353534343535323236346366633532633336
          3334643438386339386530393365653463383939633435390a303739333631653661336166626232
          32623932376331636563326435636163613231383362373963353439353736313637333432666332
          3132613064643831380a316363396334343637343731633164613361663234643533303137353535
          3761

mysql_replication_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          36376339313830376530626435666361623362353335326330333831393736373933616364383863
          6535353837376333303234663038653535626261346162340a636537376339626135636261613662
          39663830303034633339303931373131646531343139363938666465653463303037356538633863
          6662393233303566320a663566646635663537633934376164336333333637353364366132656434
          3364

keepalived_pass: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          36376339313830376530626435666361623362353335326330333831393736373933616364383863
          6535353837376333303234663038653535626261346162340a636537376339626135636261613662
          39663830303034633339303931373131646531343139363938666465653463303037356538633863
          6662393233303566320a663566646635663537633934376164336333333637353364366132656434
          3364


dns_transfer_key: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          33623262646461353664613534666135616636653561643633386331386665393763343731333765
          3862653730346433373863393061323261386165303833360a613736316632333564333730383662
          37616638376135353863353236313937336264343662363934383430346437623836386538346236
          3361633238613339630a356535353966353530323166343036333735656430623833663764613439
          37333938323666643266653932336637366662393637393332313564366436323265336537323136
          3237363434393566343930396433396435656161653266333262

dns_update_key: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          37616434343531343339393439393964386638346334356233393038376263396363306537616239
          3731616637383339363139613761316165376665646134320a366231643938396233356537646563
          33616236366562336363396166386664313462323861383466306362643933636661626236303532
          3030303836626634620a653736653963363539336561613862326664626261313638386134373962
          35353533393034643363333131313766303464656436663933386261336238626333333664313339
          3539396437353065633531643662316463313237656330383934


node_id: "{{ (ansible_port / 100) | int }}"
# node_id: "{{ inventory_hostname.split('-'[-1]) | int}}"


dns_cnames:
  - cname: grafana
    value: "{{ groups['grafana'][0] }}"
  - cname: influxdb
    value: "{{ groups['influxdb'][0] }}"
  - cname: lb-1
    value: "{{ groups['haproxy'][0] }}" 
  - cname: lb-2
    value: "{{ groups['haproxy'][1] }}" 
  - cname: mysql-1
    value: "{{ groups['db_servers'][0] }}" 
  - cname: mysql-2
    value: "{{ groups['db_servers'][1] }}"
  - cname: ns-1
    value: "{{ groups['dns_servers'][0] }}"
  - cname: ns-2
    value: "{{ groups['dns_servers'][1] }}"
  - cname: prometheus
    value: "{{ groups['metrics'][0] }}"
  - cname: www-1
    value: "{{ groups['web_servers'][0] }}"
  - cname: www-2
    value: "{{ groups['web_servers'][1] }}"