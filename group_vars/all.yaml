machine1: 31422
machine2: 37122
machine3: 36122

startup_name: be.bop

dnsips:
  - 1.1.1.1
  - 8.8.8.8
  - 9.9.9.9

alips:
  - 192.168.42.0/23
  - 127.0.0.0/8
  - 172.17.0.0/16

prometheus_jobs:
  - name: linux
    target_port: 9100
    target_group: 
      - KnOMM-1
      - KnOMM-2
      - KnOMM-3


  - name: bind9
    target_port: 9119
    target_group: 
      - ns-1
      - ns-2
      - KnOMM-3

  - name: nginx
    target_port: 9113
    target_group: 
      - www-1
      - www-2
      - KnOMM-3
      
  - name: mysql
    target_port: 9104
    target_group:
      - mysql-1
      - mysql-2

  - name: influxdb
    target_port: 9424
    target_group:
      - influxdb

  - name: haproxy
    target_port: 9101
    target_group: 
      - lb-1
      - lb-2

  - name: keepalived
    target_port: 9165
    target_group: 
      - KnOMM-1
      - KnOMM-2

mysql_backup: backup
backup_server_ip: 192.168.42.132
backup_server_ssh_key: ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIEu6pFFWyuRrl4WGFPQGElYN9txwTGm2wSntcpVAaN90

mysql_replication_user: replication
agama_port: 8001
grafana_port: 3001

agama_amount: 2

influx_host: KnOMM-1 
mysql_host: KnOMM-1
keepalived_master: KnOMM-1

mysql_backup_host: "{{ groups['db_servers'] | reject('eq', mysql_host) | first | default(mysql_host) }}"

mysql_database: agama
mysql_user: agama
mysql_exporter_user: exporter
mysql_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          36376339313830376530626435666361623362353335326330333831393736373933616364383863
          6535353837376333303234663038653535626261346162340a636537376339626135636261613662
          39663830303034633339303931373131646531343139363938666465653463303037356538633863
          6662393233303566320a663566646635663537633934376164336333333637353364366132656434
          3364

grafana_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          63323336646533663164363863613738343432646537353534343535323236346366633532633336
          3334643438386339386530393365653463383939633435390a303739333631653661336166626232
          32623932376331636563326435636163613231383362373963353439353736313637333432666332
          3132613064643831380a316363396334343637343731633164613361663234643533303137353535
          3761

mysql_replication_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          36376339313830376530626435666361623362353335326330333831393736373933616364383863
          6535353837376333303234663038653535626261346162340a636537376339626135636261613662
          39663830303034633339303931373131646531343139363938666465653463303037356538633863
          6662393233303566320a663566646635663537633934376164336333333637353364366132656434
          3364

keepalived_pass: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          36376339313830376530626435666361623362353335326330333831393736373933616364383863
          6535353837376333303234663038653535626261346162340a636537376339626135636261613662
          39663830303034633339303931373131646531343139363938666465653463303037356538633863
          6662393233303566320a663566646635663537633934376164336333333637353364366132656434
          3364


dns_transfer_key: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          32396539363835346335393935353131373432653763346334343935383161666539643534376637
          3430356438663861363037366563383133356332333533620a393639323761613966346336643266
          37643839383532613862633437346235326463653238366633393032373937643037636362386532
          6363316564356161660a363835623032343330326339333036353237626162313239343933363930
          32623838653064313738306336633666343365656230333232626437356366323263396164653136
          6162643939393165666465303662386536313766643465383130

dns_update_key: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          65633435633837356136353563363164396261663664376564663336356566303735373037393339
          6233623162353965623338323530633064356262663539660a313661383239333436313837666461
          65313533313261363563646331323136313431616138636136386630393335396465346433356263
          3362616633373632340a303565393732383036376362373735353366623466363135646536356233
          65643562363063613464616663373734353332306534663039663765646139373564303439373363
          6261393663666466306561323839663262396636663937653033


node_id: "{{ (ansible_port / 100) | int }}"
# node_id: "{{ inventory_hostname.split('-'[-1]) | int}}"


dns_cnames:
  - cname: grafana
    value: "{{ groups['grafana'][0] }}"
  - cname: influxdb
    value: "{{ groups['influxdb'][0] }}"
  - cname: lb-1
    value: "{{ groups['haproxy'][0] }}" 
  - cname: lb-2
    value: "{{ groups['haproxy'][1] }}" 
  - cname: mysql-1
    value: "{{ groups['db_servers'][0] }}" 
  - cname: mysql-2
    value: "{{ groups['db_servers'][1] }}"
  - cname: ns-1
    value: "{{ groups['dns_secondary'][0] }}"
    # value: "{{ groups['dns_servers'][0] }}"
  - cname: ns-2
    value: "{{ groups['dns_secondary'][1] }}"
    # value: "{{ groups['dns_servers'][0] }}"
  - cname: prometheus
    value: "{{ groups['metrics'][0] }}"
  - cname: www-1
    value: "{{ groups['web_servers'][0] }}"
  - cname: www-2
    value: "{{ groups['web_servers'][1] }}"
  - cname: test6
    value: 127.0.0.1
